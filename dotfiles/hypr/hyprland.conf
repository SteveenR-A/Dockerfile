# ====== CONFIGURACIÓN OPTIMIZADA HYPRLAND ======
# By: @androw (versión profesional)

# -----------------------------------------------
# 1. CONFIGURACIÓN BÁSICA
# -----------------------------------------------
$mainMod = SUPER
monitor = , preferred, auto, 1
$color_bg = rgba(0a0f1cff)
$color_border_active = rgba(000000cc)
$color_border_inactive = rgba(00000099)
$color_accent = rgba(00ffffff)
$color_text = rgba(caf0f8ff)
$terminal = kitty --single-instance

# -----------------------------------------------
# 2. AUTOEJECUCIÓN
# -----------------------------------------------
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = gsettings set org.gnome.desktop.interface icon-theme 'Papirus-Dark'
exec-once = waybar --config ~/.config/waybar/config
exec-once = swaync
exec-once = wl-paste --watch cliphist store
exec-once = hypridle 
exec-once = swww-daemon --format xrgb
exec-once = ~/.config/hypr/scripts/wallpaper_auto_swww.sh


# -----------------------------------------------s
# 3. GESTIÓN DE VENTANAS
# -----------------------------------------------
general {
    layout = dwindle
    border_size = 3
    col.active_border = $color_border_active
    col.inactive_border = $color_border_inactive
    gaps_in = 4  # Mejor separación visual
    gaps_out = 2 # Mejor separación visual
    resize_on_border = true
    allow_tearing = false
}

dwindle {
    pseudotile = yes
    preserve_split = yes
    force_split = 2
    special_scale_factor = 0.85  # Ventanas más uniformes
    split_width_multiplier = 1.1 # Splits más naturales
#    no_gaps_when_only = true     # Sin gaps si solo hay una ventana
}

master {
}

# -----------------------------------------------
# 4. DECORACIONES
# -----------------------------------------------
decoration {
    rounding = 12
    active_opacity = 0.98
    inactive_opacity = 0.85  # Más diferencia entre ventana activa/inactiva

    # --- Sombras (Sintaxis actualizada para v0.40.0+) ---
    shadow {
        enabled = yes
        range = 25
        render_power = 3
        color = rgba(00000055) # Un color de sombra más sutil
        ignore_window = true
    }

    # --- Desenfoque (Blur) ---
    # Para que el blur funcione, debe estar activado aquí.
    blur {
        enabled = yes
        size = 6
        passes = 2
        noise = 0.02
    }
}

# -----------------------------------------------
# 5. ANIMACIONES
# -----------------------------------------------
animations {
    enabled = yes
    # La palabra clave 'on' se reemplaza por '1' (activado) y algunas animaciones cambiaron de nombre.
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    bezier = magicLamp, 0.2, 0.9, 0.4, 1.2
    animation = windowsIn, 1, 8, magicLamp, popin
#    animation = windowsOut, 1, 12, default, fade
    animation = fadeIn, 1, 5, default
    animation = workspaces, 1, 6, default, slidevert
}

# -----------------------------------------------
# 6. ATAJOS (KEYBINDS)
# -----------------------------------------------
# Lanzadores y utilidades
bind = $mainMod, A, exec, $terminal
bind = $mainMod, D, exec, fuzzel --icon-theme Papirus-Dark --font 'JetBrainsMono Nerd Font:size=13'
# --- Atajo para fondo de pantalla aleatorio ---
bind = $mainMod, B, exec, bash -c '~/.config/hypr/scripts/wallpaper_random_swww.sh'
bind = $mainMod, S, exec, chromium  # Abre Chromium (puedes cambiarlo por tu navegador preferido)

# Gestión de ventanas
bind = $mainMod, Q, killactive
bind = $mainMod, V, exec, kitty --class cava-visualizer -e cava # Se mantiene kitty aquí para la regla de ventana específica si la tuvieras
bind = $mainMod, G, togglegroup
bind = $mainMod, space, togglefloating  # SUPER + Espacio: alterna ventana flotante/mosaico
bind = $mainMod, w, fullscreen
# Atajos extra para control de ventanas
bind = $mainMod, F, fullscreen, 1  # Pantalla completa real
bind = $mainMod, Z, fullscreen, 0  # Pantalla completa maximizada
bind = $mainMod, T, pseudo         # Alternar pseudotile
bind = $mainMod, Y, togglesplit    # Cambiar dirección de split
# Mover ventanas entre workspaces y navegar rápido
bind = $mainMod, bracketleft, movetoworkspace, -1
bind = $mainMod, bracketright, movetoworkspace, +1
bind = $mainMod SHIFT, bracketleft, workspace, -1
bind = $mainMod SHIFT, bracketright, workspace, +1
# Centrar y redimensionar ventanas flotantes
bind = $mainMod, C, centerwindow
bind = $mainMod, R, resizeactive, exact 800 600


# Sistemas
bind = $mainMod SHIFT, C, exec, hyprctl reload # Recargar configuración de Hyprland
bind = $mainMod, L, exec, hyprlock # Bloquear pantalla y mostrar reloj
bind = $mainMod, P, exec, systemctl suspend
bind = $mainMod SHIFT, P, exec, grim -g "$(slurp)" - | wl-copy # Captura de área
bindm = $mainMod, mouse:272, movewindow # 'bindm' es para atajos con el ratón
#bind = $mainMod, mouse:273, resizewindow
# --- Atajo para Conky ---
bind = $mainMod, X, exec, ~/.config/hypr/scripts/toggle_conky.sh # Alterna Conky (abrir/cerrar)

# Teclas multimedia (audio)
bindle = , XF86AudioRaiseVolume, exec, pamixer -i 2
bindle = , XF86AudioLowerVolume, exec, pamixer -d 2
bindle = , XF86AudioMute, exec, pamixer -t
bindle = , XF86AudioMicMute, exec, pamixer --default-source -m
bindle = , XF86AudioPlay, exec, playerctl play-pause
bindle = , XF86AudioPause, exec, playerctl play-pause
bindle = , XF86AudioNext, exec, playerctl next
bindle = , XF86AudioPrev, exec, playerctl previous

# Teclas multimedia (brillo)
bindle = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bindle = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# Captura de pantalla
bind = , Print, exec, ~/.local/bin/captura_interactiva.sh

# Mover ventana activa al siguiente/anterior escritorio
bind = $mainMod SHIFT, left, movetoworkspace, -1
bind = $mainMod SHIFT, right, movetoworkspace, +1

# Mover (intercambiar) ventana dentro del layout actual

bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Cambiar de escritorio
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5

# Cambiar al siguiente/anterior escritorio con flechas
bind = $mainMod, left, workspace, -1
bind = $mainMod, right, workspace, +1

# Cambiar de escritorio con la rueda del ratón (sobre la barra o un espacio vacío)
bind = $mainMod, mouse_down, workspace, +1
bind = $mainMod, mouse_up, workspace, -1


# -----------------------------------------------
# 7. REGLAS DE VENTANAS
# -----------------------------------------------

# --- Forzar pantalla completa en juegos de Steam ---
# Esta regla identifica las ventanas de juegos de Steam (usando una expresión regular para la clase de ventana) y las fuerza a pantalla completa.
windowrulev2 = fullscreen,class:^(steam_app_.*)$

# (No hay reglas innecesarias)

# -----------------------------------------------
# 8. CONFIGURACIONES ESPECIALES
# -----------------------------------------------
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    # vfr = true es obsoleto y el valor por defecto ahora.
}

workspace = 1, persistent:true
workspace = 2, persistent:true
workspace = 3, persistent:true
workspace = 4, persistent:true
workspace = 5, persistent:true


input {
    # La sintaxis ha cambiado, para referencia futura:
    repeat_delay = 300
    repeat_rate = 50
    accel_profile = flat  # Perfil plano para mejor control del ratón
    sensitivity = 0.0     # Sin aceleración
    # Mejoras para touchpad (si aplica)
    natural_scroll = true
#     tap-to-click = true
}


# ===== FIN DE CONFIGURACIÓN =====