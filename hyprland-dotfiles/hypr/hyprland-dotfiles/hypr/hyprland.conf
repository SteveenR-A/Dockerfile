# ====== CONFIGURACIÓN OPTIMIZADA HYPRLAND ======
# By: @SteveenR-A


# -----------------------------------------------
# 1. CONFIGURACIÓN BÁSICA
# -----------------------------------------------
$mainMod = SUPER
monitor = , preferred, auto, 1
$color_bg = rgba(0a0f1cff)
$color_border_active = rgba(000000cc)
$color_border_inactive = rgba(00000099)
$color_accent = rgba(00ffffff)
$color_text = rgba(caf0f8ff)
$terminal = kitty --single-instance

# -----------------------------------------------
# 2. AUTOEJECUCIÓN
# -----------------------------------------------
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = gsettings set org.gnome.desktop.interface icon-theme 'Papirus-Dark'
exec-once = waybar --config ~/.config/waybar/config
exec-once = swaync
exec-once = wl-paste --watch cliphist store
exec-once = hypridle
exec-once = swww-daemon --format xrgb
exec-once = ~/.config/hypr/scripts/wallpaper_auto_swww.sh

# -----------------------------------------------
# 3. GESTIÓN DE VENTANAS
# -----------------------------------------------
general {
    layout = dwindle
    border_size = 3
    col.active_border = $color_border_active
    col.inactive_border = $color_border_inactive
    gaps_in = 6
    gaps_out = 0
    resize_on_border = true
    allow_tearing = false
}

dwindle {
    pseudotile = yes
    preserve_split = yes
    force_split = 2
    no_gaps_when_only = 1
}

master {
    new_is_master = false
}

# -----------------------------------------------
# 4. DECORACIONES
# -----------------------------------------------
decoration {
    rounding = 12
    active_opacity = 0.98
    inactive_opacity = 0.90
    col.active_border = $color_border_active
    col.inactive_border = $color_border_inactive
    blur {
        enabled = true
        size = 6
        passes = 2
        noise = 0.02
        contrast = 1.2
        brightness = 1.1
    }
    drop_shadow = yes
    shadow_range = 25
    shadow_render_power = 3
    shadow_color = $color_accent
    shadow_ignore_window = true
}

# -----------------------------------------------
# 5. ANIMACIONES
# -----------------------------------------------
animations {
    enabled = yes
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    bezier = magicLamp, 0.2, 0.9, 0.4, 1.2
    animation = windows, 1, 8, magicLamp, popin
    animation = windowsOut, 1, 12, default, fade
    animation = fade, 1, 5, default
    animation = workspaces, 1, 6, smoothIn, slidevert
    window_origin_foci = 0.5 1
}

# -----------------------------------------------
# 6. ATAJOS (KEYBINDS)
# -----------------------------------------------
# Lanzadores y utilidades
bind = $mainMod, A, exec, $terminal
bind = $mainMod, D, exec, fuzzel --icon-theme Papirus-Dark --font 'JetBrainsMono Nerd Font:size=13'
# --- Atajo para fondo de pantalla aleatorio ---
bind = $mainMod, B, exec, bash -c '~/.config/hypr/scripts/wallpaper_random_swww.sh'

# Gestión de ventanas
bind = $mainMod, Q, killactive
bind = $mainMod, F, fullscreen, 1
bind = $mainMod, V, exec, kitty --class cava-visualizer -e cava # Se mantiene kitty aquí para la regla de ventana específica si la tuvieras
bind = $mainMod, G, togglegroup
bind = $mainMod, space, togglefloating  # SUPER + Espacio: alterna ventana flotante/mosaico

# Sistema
bind = $mainMod SHIFT, E, exec, env DISPLAY=$DISPLAY pkexec wlogout --protocol layer-shell --buttons-per-row 4
bind = $mainMod SHIFT, C, exec, hyprctl reload # Recargar configuración de Hyprland
bind = $mainMod, L, exec, hyprlock # Bloquear pantalla y mostrar reloj
bind = $mainMod, P, exec, systemctl suspend
bind = $mainMod SHIFT, P, exec, grim -g "$(slurp)" - | wl-copy
bind = $mainMod, mouse:272, movewindow
bind = $mainMod, mouse:273, resizewindow

# Teclas multimedia (audio)
bindle = , XF86AudioRaiseVolume, exec, pamixer -i 5
bindle = , XF86AudioLowerVolume, exec, pamixer -d 5
bindle = , XF86AudioMute, exec, pamixer -t

# Teclas multimedia (brillo)
bindle = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bindle = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# Captura de pantalla
bind = , Print, exec, ~/.local/bin/captura_interactiva.sh

# Mover ventana activa al siguiente/anterior escritorio
bind = $mainMod SHIFT, left, movetoworkspace, -1
bind = $mainMod SHIFT, right, movetoworkspace, +1

# Mover (intercambiar) ventana dentro del layout actual

bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Cambiar de escritorio
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5

# Cambiar al siguiente/anterior escritorio con flechas
bind = $mainMod, left, workspace, -1
bind = $mainMod, right, workspace, +1

# Cambiar de escritorio con la rueda del ratón (sobre la barra o un espacio vacío)
bind = $mainMod, mouse_down, workspace, +1
bind = $mainMod, mouse_up, workspace, -1

# -----------------------------------------------
# 7. REGLAS DE VENTANAS
# -----------------------------------------------
# (No hay reglas innecesarias)

# -----------------------------------------------
# 8. CONFIGURACIONES ESPECIALES
# -----------------------------------------------
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    vfr = true
}

workspace = 1, persistent:true
workspace = 2, persistent:true
workspace = 3, persistent:true
workspace = 4, persistent:true
workspace = 5, persistent:true

input {
    kb_repeat_delay = 300
    kb_repeat_rate = 50
}
# ===== FIN DE CONFIGURACIÓN =====